{"remainingRequest":"C:\\inżynierka\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\inżynierka\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\inżynierka\\frontend\\src\\modules\\posts\\views\\AddPlace.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\inżynierka\\frontend\\src\\modules\\posts\\views\\AddPlace.vue","mtime":1648162687688},{"path":"C:\\inżynierka\\frontend\\babel.config.js","mtime":1645547932946},{"path":"C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645547150279},{"path":"C:\\inżynierka\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645547152282},{"path":"C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645547150279},{"path":"C:\\inżynierka\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1645547152770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9pblx1MDE3Q3luaWVya2EvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L2luXHUwMTdDeW5pZXJrYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L2luXHUwMTdDeW5pZXJrYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBheGlvc0FQSSB9IGZyb20gIkAvYXhpb3NBUEkiOwppbXBvcnQgTG9jYWxpemF0aW9uU2VsZWN0IGZyb20gIi4uL2NvbXBvbmVudHMvTG9jYWxpemF0aW9uU2VsZWN0LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMb2NhbGl6YXRpb25TZWxlY3Q6IExvY2FsaXphdGlvblNlbGVjdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgbG9jYWxpemF0aW9uOiAiIiwKICAgICAgY2F0ZWdvcnk6ICIiLAogICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIGltYWdlczogW10sCiAgICAgIGNvbnZlcnRlZEltYWdlczogW10sCiAgICAgIGFsbG93ZWRUeXBlczogImltYWdlL3BuZywgaW1hZ2UvanBlZywgaW1hZ2UvYm1wLCBpbWFnZS9pbWciLAogICAgICBpbWFnZVJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICB2YXIgaGFzRHVwbGljYXRlcyA9IGZhbHNlOwogICAgICAgIHZhciBjaGVja2VkVmFsdWVzID0gW107CiAgICAgICAgdi5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgaWYgKGNoZWNrZWRWYWx1ZXMuc29tZShmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIHJldHVybiB2YWwubmFtZSA9PSB2YWx1ZS5uYW1lOwogICAgICAgICAgfSkpIHsKICAgICAgICAgICAgaGFzRHVwbGljYXRlcyA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY2hlY2tlZFZhbHVlcy5wdXNoKHZhbHVlKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gIWhhc0R1cGxpY2F0ZXMgfHwgIkRvZGFubyBqdcW8IHBvZGFueSBwbGlrIjsKICAgICAgfSwgZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gIXYgfHwgIXYuc29tZShmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIHJldHVybiAhX3RoaXMuYWxsb3dlZFR5cGVzLmluY2x1ZGVzKHZhbHVlLnR5cGUpOwogICAgICAgIH0pIHx8ICJQb2Rhbm8gbmlld8WCYcWbY2l3eSBmb3JtYXQgcGxpa3UuIERvcHVzemN6YWxuZSBmb3JtYXR5OiBwbmcsIGpwZywganBlZywgYm1wLCBpbWciOwogICAgICB9XQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZFBvc3Q6IGZ1bmN0aW9uIGFkZFBvc3QoKSB7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImxvY2FsaXphdGlvbiIsIHRoaXMuJHJlZnMubG9jYWxpemF0aW9uc2VsZWN0Lm1hcmtlckxhdExuZyk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiY2F0ZWdvcnkiLCB0aGlzLmNhdGVnb3J5KTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJkZXNjcmlwdGlvbiIsIHRoaXMuZGVzY3JpcHRpb24pOwogICAgICB0aGlzLmNvbnZlcnRlZEltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiaW1hZ2VzIiwgaW1hZ2UsIGltYWdlLm5hbWUpOwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coZm9ybURhdGEuZ2V0QWxsKCJpbWFnZXMiKSk7CiAgICAgIGF4aW9zQVBJLnBvc3QoIi9hcGkvcG9zdCIsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBheGlvc0FQSS5oZWFkZXJzKSwge30sIHsKICAgICAgICAgICJjb250ZW50LXR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKICAgICAgICB9KQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coImVyciIpOwogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIG9uQWRkRmlsZXM6IGZ1bmN0aW9uIG9uQWRkRmlsZXMoZmlsZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoZmlsZXMubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLmNvbnZlcnRlZEltYWdlcyA9IFtdOwogICAgICB9CgogICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICAgIHZhciBzZWxmID0gX3RoaXMyOwoKICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtldmVudC50YXJnZXQucmVzdWx0XSk7CiAgICAgICAgICB2YXIgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgIGltYWdlLnNyYyA9IGJsb2JVUkw7CiAgICAgICAgICBpbWFnZS5vbmxvYWQgPSAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICB2YXIgcmVzaXplZCwgZmlsZTsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHJlc2l6ZWQgPSBzZWxmLnJlc2l6ZU1lKGltYWdlKTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2gocmVzaXplZCkudGhlbihmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuYmxvYigpOwogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGJsb2JGaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpbGUoW2Jsb2JGaWxlXSwgc2VsZi5pbWdOYW1lKCkgKyAiLmpwZyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImltYWdlL2pwZWciCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBmaWxlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnZlcnRlZEltYWdlcy5wdXNoKGZpbGUpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKICAgICAgICB9OwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5jb252ZXJ0ZWRJbWFnZXMpOwogICAgfSwKICAgIHJlc2l6ZU1lOiBmdW5jdGlvbiByZXNpemVNZShpbWcpIHsKICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgICB2YXIgd2lkdGggPSBpbWcud2lkdGg7CiAgICAgIHZhciBoZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgICB2YXIgbWF4X3dpZHRoID0gODAwOwogICAgICB2YXIgbWF4X2hlaWdodCA9IDgwMDsKCiAgICAgIGlmICh3aWR0aCA+IGhlaWdodCkgewogICAgICAgIGlmICh3aWR0aCA+IG1heF93aWR0aCkgewogICAgICAgICAgaGVpZ2h0ID0gTWF0aC5yb3VuZChoZWlnaHQgKj0gbWF4X3dpZHRoIC8gd2lkdGgpOwogICAgICAgICAgd2lkdGggPSBtYXhfd2lkdGg7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChoZWlnaHQgPiBtYXhfaGVpZ2h0KSB7CiAgICAgICAgICB3aWR0aCA9IE1hdGgucm91bmQod2lkdGggKj0gbWF4X2hlaWdodCAvIGhlaWdodCk7CiAgICAgICAgICBoZWlnaHQgPSBtYXhfaGVpZ2h0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsIDAuOCk7CiAgICB9LAogICAgaW1nTmFtZTogZnVuY3Rpb24gaW1nTmFtZSgpIHsKICAgICAgdmFyIHJlc3VsdCA9ICIiOwogICAgICB2YXIgY2hhcmFjdGVycyA9ICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSI7CiAgICAgIHZhciBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDIwOyBpKyspIHsKICAgICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIGRyYWdvdmVyOiBmdW5jdGlvbiBkcmFnb3ZlcihldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLiRyZWZzLmltZ2lucHV0LmZvY3VzKCk7CiAgICB9LAogICAgZHJhZ2xlYXZlOiBmdW5jdGlvbiBkcmFnbGVhdmUoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy4kcmVmcy5pbWdpbnB1dC5ibHVyKCk7CiAgICB9LAogICAgZHJvcDogZnVuY3Rpb24gZHJvcChldmVudCkgewogICAgICB2YXIgX3RoaXMkaW1hZ2VzOwoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5vbkFkZEZpbGVzKEFycmF5LmZyb20oZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzKSk7CgogICAgICAoX3RoaXMkaW1hZ2VzID0gdGhpcy5pbWFnZXMpLnB1c2guYXBwbHkoX3RoaXMkaW1hZ2VzLCBfdG9Db25zdW1hYmxlQXJyYXkoZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzKSk7CgogICAgICB0aGlzLiRyZWZzLmltZ2lucHV0LnZhbGlkYXRlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACAA;AACAC;AADA,GADA;AAIAC,MAJA,kBAIA;AAAA;;AACA;AACAC,sBADA;AAEAC,kBAFA;AAGAC,qBAHA;AAIAC,gBAJA;AAKAC,yBALA;AAMAC,iEANA;AAOAC,mBACA;AACA;AACA;AACAC;AACA;AAAA;AAAA;AACAC;AACA;;AACAC;AACA,SALA;AAMA;AACA,OAXA,EAYA;AAAA,eACA,MACA;AAAA;AAAA,UADA,IAEA,iFAHA;AAAA,OAZA;AAPA;AAyBA,GA9BA;AA+BAC;AACAC,WADA,qBACA;AACA;AACAC,sBACA,cADA,EAEA,0CAFA;AAIAA;AACAA;AACA;AACAA;AACA,OAFA;AAGAC;AACAC,eACAC,IADA,CACA,WADA,EACAH,QADA,EACA;AACAI,iDACAF,gBADA;AAEA;AAFA;AADA,OADA,EAOAG,KAPA,CAOA;AACAJ;AACAA;AACA,OAVA;AAWA,KAxBA;AAyBAK,cAzBA,sBAyBAC,KAzBA,EAyBA;AAAA;;AACA;AACA;AACA;;AACAA;AACA;AACAC;AACA;;AACAA;AACA;AACA;AACA;AACAC;AACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAC,2BADA,GACAC,oBADA;AAAA;AAAA,2BAEAC,eACAC,IADA,CACA;AAAA;AAAA,qBADA,EAEAA,IAFA,CAGA;AAAA,6BACA;AACAC;AADA,wBADA;AAAA,qBAHA,CAFA;;AAAA;AAEAC,wBAFA;AAUAJ;;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA,SAjBA;AAkBA,OAtBA;AAuBAV;AACA,KArDA;AAsDAe,YAtDA,oBAsDAC,GAtDA,EAsDA;AACA;AAEA;AACA;AACA;AACA;;AACA;AACA;AACAC;AACAC;AACA;AACA,OALA,MAKA;AACA;AACAA;AACAD;AACA;AACA;;AACAE;AACAA;AACA;AACAC;AACA;AACA,KA7EA;AA8EAC,WA9EA,qBA8EA;AACA;AACA,uBACA,gEADA;AAEA;;AACA;AACAC,oCACAC,4CADA;AAGA;;AACA;AACA,KAzFA;AA0FAC,YA1FA,oBA0FAC,KA1FA,EA0FA;AACAA;AACA;AACA,KA7FA;AA8FAC,aA9FA,qBA8FAD,KA9FA,EA8FA;AACAA;AACA;AACA,KAjGA;AAkGAE,QAlGA,gBAkGAF,KAlGA,EAkGA;AAAA;;AACAA;AACA;;AACA;;AACA;AACA;AAvGA;AA/BA","names":["components","LocalizationSelect","data","localization","category","description","images","convertedImages","allowedTypes","imageRules","v","hasDuplicates","checkedValues","methods","addPost","formData","console","axiosAPI","post","headers","catch","onAddFiles","files","reader","image","resized","self","fetch","then","type","file","resizeMe","img","height","width","canvas","ctx","imgName","result","Math","dragover","event","dragleave","drop"],"sourceRoot":"src/modules/posts/views","sources":["AddPlace.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-card>\r\n      <v-text-field\r\n        class=\"mt-5\"\r\n        v-model=\"category\"\r\n        label=\"Kategoria\"\r\n      ></v-text-field>\r\n      <v-textarea class=\"mt-5\" v-model=\"description\" label=\"Opis\"></v-textarea>\r\n      <div @dragover=\"dragover\" @dragleave=\"dragleave\" @drop=\"drop\">\r\n        <v-file-input\r\n          accept=\"image/png, image/jpeg, image/bmp, image/img\"\r\n          prepend-icon=\"mdi-camera\"\r\n          ref=\"imginput\"\r\n          chips\r\n          multiple\r\n          label=\"Zdjęcia\"\r\n          :rules=\"imageRules\"\r\n          v-model=\"images\"\r\n          @change=\"onAddFiles\"\r\n        ></v-file-input>\r\n      </div>\r\n      <v-btn color=\"success\" @click=\"addPost\">dodaj </v-btn>\r\n    </v-card>\r\n    <localization-select ref=\"localizationselect\" />\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport { axiosAPI } from \"@/axiosAPI\";\r\nimport LocalizationSelect from \"../components/LocalizationSelect.vue\";\r\nexport default {\r\n  components: {\r\n    LocalizationSelect,\r\n  },\r\n  data() {\r\n    return {\r\n      localization: \"\",\r\n      category: \"\",\r\n      description: \"\",\r\n      images: [],\r\n      convertedImages: [],\r\n      allowedTypes: \"image/png, image/jpeg, image/bmp, image/img\",\r\n      imageRules: [\r\n        (v) => {\r\n          var hasDuplicates = false;\r\n          var checkedValues = [];\r\n          v.forEach((value) => {\r\n            if (checkedValues.some((val) => val.name == value.name)) {\r\n              hasDuplicates = true;\r\n            }\r\n            checkedValues.push(value);\r\n          });\r\n          return !hasDuplicates || \"Dodano już podany plik\";\r\n        },\r\n        (v) =>\r\n          !v ||\r\n          !v.some((value) => !this.allowedTypes.includes(value.type)) ||\r\n          \"Podano niewłaściwy format pliku. Dopuszczalne formaty: png, jpg, jpeg, bmp, img\",\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    addPost() {\r\n      const formData = new FormData();\r\n      formData.append(\r\n        \"localization\",\r\n        this.$refs.localizationselect.markerLatLng\r\n      );\r\n      formData.append(\"category\", this.category);\r\n      formData.append(\"description\", this.description);\r\n      this.convertedImages.forEach((image) => {\r\n        formData.append(\"images\", image, image.name);\r\n      });\r\n      console.log(formData.getAll(\"images\"));\r\n      axiosAPI\r\n        .post(\"/api/post\", formData, {\r\n          headers: {\r\n            ...axiosAPI.headers,\r\n            \"content-type\": \"multipart/form-data\",\r\n          },\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"err\");\r\n          console.log(err);\r\n        });\r\n    },\r\n    onAddFiles(files) {\r\n      if (files.length == 0) {\r\n        this.convertedImages = [];\r\n      }\r\n      files.forEach((file) => {\r\n        const reader = new FileReader();\r\n        reader.readAsArrayBuffer(file);\r\n        const self = this;\r\n        reader.onload = function (event) {\r\n          var blob = new Blob([event.target.result]);\r\n          var blobURL = URL.createObjectURL(blob);\r\n          var image = new Image();\r\n          image.src = blobURL;\r\n          image.onload = async function () {\r\n            var resized = self.resizeMe(image);\r\n            let file = await fetch(resized)\r\n              .then((r) => r.blob())\r\n              .then(\r\n                (blobFile) =>\r\n                  new File([blobFile], self.imgName() + \".jpg\", {\r\n                    type: \"image/jpeg\",\r\n                  })\r\n              );\r\n            self.convertedImages.push(file);\r\n          };\r\n        };\r\n      });\r\n      console.log(this.convertedImages);\r\n    },\r\n    resizeMe(img) {\r\n      var canvas = document.createElement(\"canvas\");\r\n\r\n      var width = img.width;\r\n      var height = img.height;\r\n      var max_width = 800;\r\n      var max_height = 800;\r\n      if (width > height) {\r\n        if (width > max_width) {\r\n          height = Math.round((height *= max_width / width));\r\n          width = max_width;\r\n        }\r\n      } else {\r\n        if (height > max_height) {\r\n          width = Math.round((width *= max_height / height));\r\n          height = max_height;\r\n        }\r\n      }\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      var ctx = canvas.getContext(\"2d\");\r\n      ctx.drawImage(img, 0, 0, width, height);\r\n      return canvas.toDataURL(\"image/jpeg\", 0.8);\r\n    },\r\n    imgName() {\r\n      var result = \"\";\r\n      var characters =\r\n        \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n      var charactersLength = characters.length;\r\n      for (var i = 0; i < 20; i++) {\r\n        result += characters.charAt(\r\n          Math.floor(Math.random() * charactersLength)\r\n        );\r\n      }\r\n      return result;\r\n    },\r\n    dragover(event) {\r\n      event.preventDefault();\r\n      this.$refs.imginput.focus();\r\n    },\r\n    dragleave(event) {\r\n      event.preventDefault();\r\n      this.$refs.imginput.blur();\r\n    },\r\n    drop(event) {\r\n      event.preventDefault();\r\n      this.onAddFiles(Array.from(event.dataTransfer.files));\r\n      this.images.push(...event.dataTransfer.files);\r\n      this.$refs.imginput.validate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped></style>\r\n"]}]}