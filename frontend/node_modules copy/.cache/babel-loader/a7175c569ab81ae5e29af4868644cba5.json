{"remainingRequest":"C:\\inżynierka\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\inżynierka\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\inżynierka\\frontend\\src\\components\\post\\AddPlace.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\inżynierka\\frontend\\src\\components\\post\\AddPlace.vue","mtime":1645819040863},{"path":"C:\\inżynierka\\frontend\\babel.config.js","mtime":1645547932946},{"path":"C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645547150279},{"path":"C:\\inżynierka\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645547152282},{"path":"C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645547150279},{"path":"C:\\inżynierka\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1645547152770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9pblx1MDE3Q3luaWVya2EvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L2luXHUwMTdDeW5pZXJrYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L2luXHUwMTdDeW5pZXJrYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBheGlvc0FQSSB9IGZyb20gIkAvYXhpb3NBUEkiOwppbXBvcnQgTWFwIGZyb20gIi4vTWFwLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBNYXA6IE1hcAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgbG9jYWxpemF0aW9uOiAiIiwKICAgICAgY2F0ZWdvcnk6ICIiLAogICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgIGltYWdlczogW10sCiAgICAgIGNvbnZlcnRlZEltYWdlczogW10sCiAgICAgIGFsbG93ZWRUeXBlczogImltYWdlL3BuZywgaW1hZ2UvanBlZywgaW1hZ2UvYm1wLCBpbWFnZS9pbWciLAogICAgICBpbWFnZVJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICB2YXIgaGFzRHVwbGljYXRlcyA9IGZhbHNlOwogICAgICAgIHZhciBjaGVja2VkVmFsdWVzID0gW107CiAgICAgICAgdi5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgaWYgKGNoZWNrZWRWYWx1ZXMuc29tZShmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIHJldHVybiB2YWwubmFtZSA9PSB2YWx1ZS5uYW1lOwogICAgICAgICAgfSkpIHsKICAgICAgICAgICAgaGFzRHVwbGljYXRlcyA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY2hlY2tlZFZhbHVlcy5wdXNoKHZhbHVlKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gIWhhc0R1cGxpY2F0ZXMgfHwgIkRvZGFubyBqdcW8IHBvZGFueSBwbGlrIjsKICAgICAgfSwgZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gIXYgfHwgIXYuc29tZShmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIHJldHVybiAhX3RoaXMuYWxsb3dlZFR5cGVzLmluY2x1ZGVzKHZhbHVlLnR5cGUpOwogICAgICAgIH0pIHx8ICJQb2Rhbm8gbmlld8WCYcWbY2l3eSBmb3JtYXQgcGxpa3UuIERvcHVzemN6YWxuZSBmb3JtYXR5OiBwbmcsIGpwZywganBlZywgYm1wLCBpbWciOwogICAgICB9XQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZFBvc3Q6IGZ1bmN0aW9uIGFkZFBvc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgibG9jYWxpemF0aW9uIiwgdGhpcy5sb2NhbGl6YXRpb24pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImNhdGVnb3J5IiwgdGhpcy5jYXRlZ29yeSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZGVzY3JpcHRpb24iLCB0aGlzLmRlc2NyaXB0aW9uKTsKICAgICAgdGhpcy5jb252ZXJ0ZWRJbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1hZ2UpIHsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImltYWdlcyIsIGltYWdlLCBpbWFnZS5uYW1lKTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhLmdldEFsbCgiaW1hZ2VzIikpOwogICAgICBheGlvc0FQSS5wb3N0KCIvYXBpL3Bvc3QiLCBmb3JtRGF0YSwgewogICAgICAgIGhlYWRlcnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXhpb3NBUEkuaGVhZGVycyksIHt9LCB7CiAgICAgICAgICAiY29udGVudC10eXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiCiAgICAgICAgfSkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLmRhdGEudG9rZW4pOwoKICAgICAgICBfdGhpczIuc2V0VXNlcihyZXMuZGF0YS51c2VyKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnIiKTsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBvbkFkZEZpbGVzOiBmdW5jdGlvbiBvbkFkZEZpbGVzKGZpbGVzKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy5jb252ZXJ0ZWRJbWFnZXMgPSBbXTsKICAgICAgfQoKICAgICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgewogICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAgICAgICB2YXIgc2VsZiA9IF90aGlzMzsKCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZXZlbnQudGFyZ2V0LnJlc3VsdF0pOwogICAgICAgICAgdmFyIGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgICAgICBpbWFnZS5zcmMgPSBibG9iVVJMOwogICAgICAgICAgaW1hZ2Uub25sb2FkID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgdmFyIHJlc2l6ZWQsIGZpbGU7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXNpemVkID0gc2VsZi5yZXNpemVNZShpbWFnZSk7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHJlc2l6ZWQpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmJsb2IoKTsKICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChibG9iRmlsZSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWxlKFtibG9iRmlsZV0sIHNlbGYuaW1nTmFtZSgpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJpbWFnZS9wbmciCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBmaWxlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnZlcnRlZEltYWdlcy5wdXNoKGZpbGUpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCiAgICByZXNpemVNZTogZnVuY3Rpb24gcmVzaXplTWUoaW1nKSB7CiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgdmFyIHdpZHRoID0gaW1nLndpZHRoOwogICAgICB2YXIgaGVpZ2h0ID0gaW1nLmhlaWdodDsKICAgICAgdmFyIG1heF93aWR0aCA9IDgwMDsKICAgICAgdmFyIG1heF9oZWlnaHQgPSA4MDA7CgogICAgICBpZiAod2lkdGggPiBoZWlnaHQpIHsKICAgICAgICBpZiAod2lkdGggPiBtYXhfd2lkdGgpIHsKICAgICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0ICo9IG1heF93aWR0aCAvIHdpZHRoKTsKICAgICAgICAgIHdpZHRoID0gbWF4X3dpZHRoOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4X2hlaWdodCkgewogICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoICo9IG1heF9oZWlnaHQgLyBoZWlnaHQpOwogICAgICAgICAgaGVpZ2h0ID0gbWF4X2hlaWdodDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoImltYWdlL2pwZWciLCAwLjgpOwogICAgfSwKICAgIGltZ05hbWU6IGZ1bmN0aW9uIGltZ05hbWUoKSB7CiAgICAgIHZhciByZXN1bHQgPSAiIjsKICAgICAgdmFyIGNoYXJhY3RlcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkiOwogICAgICB2YXIgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7CiAgICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBkcmFnb3ZlcjogZnVuY3Rpb24gZHJhZ292ZXIoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy4kcmVmcy5pbWdpbnB1dC5mb2N1cygpOwogICAgfSwKICAgIGRyYWdsZWF2ZTogZnVuY3Rpb24gZHJhZ2xlYXZlKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuJHJlZnMuaW1naW5wdXQuYmx1cigpOwogICAgfSwKICAgIGRyb3A6IGZ1bmN0aW9uIGRyb3AoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzJGltYWdlczsKCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMub25BZGRGaWxlcyhBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcykpOwoKICAgICAgKF90aGlzJGltYWdlcyA9IHRoaXMuaW1hZ2VzKS5wdXNoLmFwcGx5KF90aGlzJGltYWdlcywgX3RvQ29uc3VtYWJsZUFycmF5KGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcykpOwoKICAgICAgdGhpcy4kcmVmcy5pbWdpbnB1dC52YWxpZGF0ZSgpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACAA;AACAC;AADA,GADA;AAIAC,MAJA,kBAIA;AAAA;;AACA;AACAC,sBADA;AAEAC,kBAFA;AAGAC,qBAHA;AAIAC,gBAJA;AAKAC,yBALA;AAMAC,iEANA;AAOAC,mBACA;AACA;AACA;AACAC;AACA;AAAA;AAAA;AACAC;AACA;;AACAC;AACA,SALA;AAMA;AACA,OAXA,EAYA;AAAA,eACA,MACA;AAAA;AAAA,UADA,IAEA,iFAHA;AAAA,OAZA;AAPA;AAyBA,GA9BA;AA+BAC;AACAC,WADA,qBACA;AAAA;;AACA;AACAC;AACAA;AACAA;AACA;AACAA;AACA,OAFA;AAGAC;AACAC,eACAC,IADA,CACA,WADA,EACAH,QADA,EACA;AACAI,iDACAF,gBADA;AAEA;AAFA;AADA,OADA,EAOAG,IAPA,CAOA;AACAC;;AACA;AACA,OAVA,EAWAC,KAXA,CAWA;AACAN;AACAA;AACA,OAdA;AAeA,KAzBA;AA0BAO,cA1BA,sBA0BAC,KA1BA,EA0BA;AAAA;;AACA;AACA;AACA;;AACAA;AACA;AACAC;AACA;;AACAA;AACA;AACA;AACA;AACAC;AACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAC,2BADA,GACAC,oBADA;AAAA;AAAA,2BAEAC,eACAT,IADA,CACA;AAAA;AAAA,qBADA,EAEAA,IAFA,CAGA;AAAA,6BACA;AAAAU;AAAA,wBADA;AAAA,qBAHA,CAFA;;AAAA;AAEAC,wBAFA;AAQAH;;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,SAfA;AAgBA,OApBA;AAqBA,KAnDA;AAoDAI,YApDA,oBAoDAC,GApDA,EAoDA;AACA;AAEA;AACA;AACA;AACA;;AACA;AACA;AACAC;AACAC;AACA;AACA,OALA,MAKA;AACA;AACAA;AACAD;AACA;AACA;;AACAE;AACAA;AACA;AACAC;AACA;AACA,KA3EA;AA4EAC,WA5EA,qBA4EA;AACA;AACA,uBACA,gEADA;AAEA;;AACA;AACAC,oCACAC,4CADA;AAGA;;AACA;AACA,KAvFA;AAwFAC,YAxFA,oBAwFAC,KAxFA,EAwFA;AACAA;AACA;AACA,KA3FA;AA4FAC,aA5FA,qBA4FAD,KA5FA,EA4FA;AACAA;AACA;AACA,KA/FA;AAgGAE,QAhGA,gBAgGAF,KAhGA,EAgGA;AAAA;;AACAA;AACA;;AACA;;AACA;AACA;AArGA;AA/BA","names":["components","Map","data","localization","category","description","images","convertedImages","allowedTypes","imageRules","v","hasDuplicates","checkedValues","methods","addPost","formData","console","axiosAPI","post","headers","then","localStorage","catch","onAddFiles","files","reader","image","resized","self","fetch","type","file","resizeMe","img","height","width","canvas","ctx","imgName","result","Math","dragover","event","dragleave","drop"],"sourceRoot":"src/components/post","sources":["AddPlace.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-card>\n      <v-text-field\n        class=\"mt-5\"\n        v-model=\"localization\"\n        label=\"Lokalizacja\"\n      ></v-text-field>\n      <v-text-field\n        class=\"mt-5\"\n        v-model=\"category\"\n        label=\"Kategoria\"\n      ></v-text-field>\n      <v-textarea class=\"mt-5\" v-model=\"description\" label=\"Opis\"></v-textarea>\n      <div @dragover=\"dragover\" @dragleave=\"dragleave\" @drop=\"drop\">\n        <v-file-input\n          accept=\"image/png, image/jpeg, image/bmp, image/img\"\n          prepend-icon=\"mdi-camera\"\n          ref=\"imginput\"\n          chips\n          multiple\n          label=\"Zdjęcia\"\n          :rules=\"imageRules\"\n          v-model=\"images\"\n          @change=\"onAddFiles\"\n        ></v-file-input>\n      </div>\n      <div id=\"map\" style=\"height: 360px; width: 640px\"></div>\n      <v-btn color=\"success\" @click=\"addPost\">dodaj </v-btn>\n    </v-card>\n    <map></map>\n  </v-container>\n</template>\n<script>\nimport { axiosAPI } from \"@/axiosAPI\";\nimport Map from \"./Map.vue\"\nexport default {\n  components: {\nMap\n  },\n  data() {\n    return {\n      localization: \"\",\n      category: \"\",\n      description: \"\",\n      images: [],\n      convertedImages: [],\n      allowedTypes: \"image/png, image/jpeg, image/bmp, image/img\",\n      imageRules: [\n        (v) => {\n          var hasDuplicates = false;\n          var checkedValues = [];\n          v.forEach((value) => {\n            if (checkedValues.some((val) => val.name == value.name)) {\n              hasDuplicates = true;\n            }\n            checkedValues.push(value);\n          });\n          return !hasDuplicates || \"Dodano już podany plik\";\n        },\n        (v) =>\n          !v ||\n          !v.some((value) => !this.allowedTypes.includes(value.type)) ||\n          \"Podano niewłaściwy format pliku. Dopuszczalne formaty: png, jpg, jpeg, bmp, img\",\n      ],\n    };\n  },\n  methods: {\n    addPost() {\n      const formData = new FormData();\n      formData.append(\"localization\", this.localization);\n      formData.append(\"category\", this.category);\n      formData.append(\"description\", this.description);\n      this.convertedImages.forEach((image) => {\n        formData.append(\"images\", image, image.name);\n      });\n      console.log(formData.getAll(\"images\"));\n      axiosAPI\n        .post(\"/api/post\", formData, {\n          headers: {\n            ...axiosAPI.headers,\n            \"content-type\": \"multipart/form-data\",\n          },\n        })\n        .then((res) => {\n          localStorage.setItem(\"token\", res.data.token);\n          this.setUser(res.data.user);\n        })\n        .catch((err) => {\n          console.log(\"err\");\n          console.log(err);\n        });\n    },\n    onAddFiles(files) {\n      if (files.length == 0) {\n        this.convertedImages = [];\n      }\n      files.forEach((file) => {\n        const reader = new FileReader();\n        reader.readAsArrayBuffer(file);\n        const self = this;\n        reader.onload = function (event) {\n          var blob = new Blob([event.target.result]);\n          var blobURL = URL.createObjectURL(blob);\n          var image = new Image();\n          image.src = blobURL;\n          image.onload = async function () {\n            var resized = self.resizeMe(image);\n            let file = await fetch(resized)\n              .then((r) => r.blob())\n              .then(\n                (blobFile) =>\n                  new File([blobFile], self.imgName(), { type: \"image/png\" })\n              );\n            self.convertedImages.push(file);\n          };\n        };\n      });\n    },\n    resizeMe(img) {\n      var canvas = document.createElement(\"canvas\");\n\n      var width = img.width;\n      var height = img.height;\n      var max_width = 800;\n      var max_height = 800;\n      if (width > height) {\n        if (width > max_width) {\n          height = Math.round((height *= max_width / width));\n          width = max_width;\n        }\n      } else {\n        if (height > max_height) {\n          width = Math.round((width *= max_height / height));\n          height = max_height;\n        }\n      }\n      canvas.width = width;\n      canvas.height = height;\n      var ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0, width, height);\n      return canvas.toDataURL(\"image/jpeg\", 0.8);\n    },\n    imgName() {\n      var result = \"\";\n      var characters =\n        \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n      var charactersLength = characters.length;\n      for (var i = 0; i < 20; i++) {\n        result += characters.charAt(\n          Math.floor(Math.random() * charactersLength)\n        );\n      }\n      return result;\n    },\n    dragover(event) {\n      event.preventDefault();\n      this.$refs.imginput.focus();\n    },\n    dragleave(event) {\n      event.preventDefault();\n      this.$refs.imginput.blur();\n    },\n    drop(event) {\n      event.preventDefault();\n      this.onAddFiles(Array.from(event.dataTransfer.files));\n      this.images.push(...event.dataTransfer.files);\n      this.$refs.imginput.validate();\n    },\n  },\n};\n</script>\n<style scoped></style>\n"]}]}