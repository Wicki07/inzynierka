{"remainingRequest":"C:\\inżynierka\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\inżynierka\\frontend\\src\\axiosAPI.js","dependencies":[{"path":"C:\\inżynierka\\frontend\\src\\axiosAPI.js","mtime":1646665731314},{"path":"C:\\inżynierka\\frontend\\babel.config.js","mtime":1645547932946},{"path":"C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645547150279},{"path":"C:\\inżynierka\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645547152282}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L2luXHUwMTdDeW5pZXJrYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CnZhciBiYXNlVVJMID0gImh0dHA6Ly8xMjcuMC4wLjE6ODAwMCI7CnZhciBheGlvc0FQSSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogYmFzZVVSTCwKICAvLyBBZHJlcyBkbyBzZXJ3ZXJhIERqYW5nbwogIHRpbWVvdXQ6IDUwMDAsCiAgaGVhZGVyczogewogICAgQXV0aG9yaXphdGlvbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikgPyAiVG9rZW4gIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpIDogbnVsbCwKICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICBhY2NlcHQ6ICJhcHBsaWNhdGlvbi9qc29uIgogIH0KfSk7CmF4aW9zQVBJLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGVycm9yKSB7CiAgICB2YXIgb3JpZ2luYWxSZXF1ZXN0OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3QgPSBlcnJvci5jb25maWc7CgogICAgICAgICAgICBpZiAoISh0eXBlb2YgZXJyb3IucmVzcG9uc2UgPT09ICJ1bmRlZmluZWQiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhbGVydCgiQSBzZXJ2ZXIvbmV0d29yayBlcnJvciBvY2N1cnJlZC4gIiArICJMb29rcyBsaWtlIENPUlMgbWlnaHQgYmUgdGhlIHByb2JsZW0uICIgKyAiU29ycnkgYWJvdXQgdGhpcyAtIHdlIHdpbGwgZ2V0IGl0IGZpeGVkIHNob3J0bHkuIik7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBpZiAoIShvcmlnaW5hbFJlcXVlc3QudXJsID09PSBiYXNlVVJMICsgIi9hcGkvYXV0aC9sb2dvdXQiICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1c1RleHQgPT09ICJVbmF1dGhvcml6ZWQiKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBheGlvc0FQSS5kZWZhdWx0cy5oZWFkZXJzWyJBdXRob3JpemF0aW9uIl0gPSAiVG9rZW4gIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3QuaGVhZGVyc1siQXV0aG9yaXphdGlvbiJdID0gIlRva2VuICIgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgYXhpb3NBUEkpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoZXJyb3IpKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCB7IGF4aW9zQVBJIH07"},{"version":3,"sources":["C:/inżynierka/frontend/src/axiosAPI.js"],"names":["axios","baseURL","axiosAPI","create","timeout","headers","Authorization","localStorage","getItem","accept","interceptors","response","use","error","originalRequest","config","alert","Promise","reject","url","status","statusText","defaults"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,OAAO,GAAG,uBAAhB;AACA,IAAMC,QAAQ,GAAGF,KAAK,CAACG,MAAN,CAAa;AAC5BF,EAAAA,OAAO,EAAEA,OADmB;AACV;AAClBG,EAAAA,OAAO,EAAE,IAFmB;AAG5BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,IACX,WAAWD,YAAY,CAACC,OAAb,CAAqB,OAArB,CADA,GAEX,IAHG;AAIP,oBAAgB,kBAJT;AAKPC,IAAAA,MAAM,EAAE;AALD;AAHmB,CAAb,CAAjB;AAYAP,QAAQ,CAACQ,YAAT,CAAsBC,QAAtB,CAA+BC,GAA/B,CACE,UAACD,QAAD,EAAc;AACZ,SAAOA,QAAP;AACD,CAHH;AAAA,qEAIE,iBAAgBE,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,YAAAA,eADR,GAC0BD,KAAK,CAACE,MADhC;;AAAA,kBAEM,OAAOF,KAAK,CAACF,QAAb,KAA0B,WAFhC;AAAA;AAAA;AAAA;;AAGIK,YAAAA,KAAK,CACH,sCACE,wCADF,GAEE,kDAHC,CAAL;AAHJ,6CAQWC,OAAO,CAACC,MAAR,CAAeL,KAAf,CARX;;AAAA;AAAA,kBAYIC,eAAe,CAACK,GAAhB,KAAwBlB,OAAO,GAAG,kBAAlC,IACAY,KAAK,CAACF,QAAN,CAAeS,MAAf,KAA0B,GAD1B,IAEAP,KAAK,CAACF,QAAN,CAAeU,UAAf,KAA8B,cAdlC;AAAA;AAAA;AAAA;;AAgBInB,YAAAA,QAAQ,CAACoB,QAAT,CAAkBjB,OAAlB,CAA0B,eAA1B,IACE,WAAWE,YAAY,CAACC,OAAb,CAAqB,OAArB,CADb;AAEAM,YAAAA,eAAe,CAACT,OAAhB,CAAwB,eAAxB,IACE,WAAWE,YAAY,CAACC,OAAb,CAAqB,OAArB,CADb;AAlBJ,6CAqBWN,QArBX;;AAAA;AAAA,6CAwBSe,OAAO,CAACC,MAAR,CAAeL,KAAf,CAxBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAJF;;AAAA;AAAA;AAAA;AAAA;AAgCA,SAASX,QAAT","sourcesContent":["import axios from \"axios\";\n\nconst baseURL = \"http://127.0.0.1:8000\";\nconst axiosAPI = axios.create({\n  baseURL: baseURL, // Adres do serwera Django\n  timeout: 5000,\n  headers: {\n    Authorization: localStorage.getItem(\"token\")\n      ? \"Token \" + localStorage.getItem(\"token\")\n      : null,\n    \"Content-Type\": \"application/json\",\n    accept: \"application/json\",\n  },\n});\n\naxiosAPI.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  async function (error) {\n    const originalRequest = error.config;\n    if (typeof error.response === \"undefined\") {\n      alert(\n        \"A server/network error occurred. \" +\n          \"Looks like CORS might be the problem. \" +\n          \"Sorry about this - we will get it fixed shortly.\"\n      );\n      return Promise.reject(error);\n    }\n\n    if (\n      originalRequest.url === baseURL + \"/api/auth/logout\" &&\n      error.response.status === 401 &&\n      error.response.statusText === \"Unauthorized\"\n    ) {\n      axiosAPI.defaults.headers[\"Authorization\"] =\n        \"Token \" + localStorage.getItem(\"token\");\n      originalRequest.headers[\"Authorization\"] =\n        \"Token \" + localStorage.getItem(\"token\");\n\n      return axiosAPI;\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport { axiosAPI };\n"]}]}