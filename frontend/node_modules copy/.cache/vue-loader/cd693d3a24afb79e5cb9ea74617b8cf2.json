{"remainingRequest":"C:\\inżynierka\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\inżynierka\\frontend\\src\\components\\post\\AddPlace.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\inżynierka\\frontend\\src\\components\\post\\AddPlace.vue","mtime":1645547587811},{"path":"C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645547150279},{"path":"C:\\inżynierka\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645547152282},{"path":"C:\\inżynierka\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645547150279},{"path":"C:\\inżynierka\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1645547152770}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2F4aW9zQVBJfSBmcm9tICcuLi8uLi9heGlvc0FQSSc7DQppbXBvcnQgeyBMb2FkZXIgfSBmcm9tICdAZ29vZ2xlbWFwcy9qcy1hcGktbG9hZGVyJzsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBsb2NhbGl6YXRpb246ICIiLA0KICAgICAgICAgICAgY2F0ZWdvcnk6ICIiLA0KICAgICAgICAgICAgZGVzY3JpcHRpb246ICIiLA0KICAgICAgICAgICAgaW1hZ2VzOiBbXSwNCiAgICAgICAgICAgIGNvbnZlcnRlZEltYWdlczogW10sDQogICAgICAgICAgICBhbGxvd2VkVHlwZXM6ICJpbWFnZS9wbmcsIGltYWdlL2pwZWcsIGltYWdlL2JtcCwgaW1hZ2UvaW1nIiwNCiAgICAgICAgICAgIGltYWdlUnVsZXM6IFsNCiAgICAgICAgICAgICAgICB2ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0R1cGxpY2F0ZXMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tlZFZhbHVlcyA9IFtdDQogICAgICAgICAgICAgICAgICAgIHYuZm9yRWFjaCh2YWx1ZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZFZhbHVlcy5zb21lKHZhbCA9PiB2YWwubmFtZSA9PSB2YWx1ZS5uYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0R1cGxpY2F0ZXMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkVmFsdWVzLnB1c2godmFsdWUpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAhaGFzRHVwbGljYXRlcyB8fCAnRG9kYW5vIGp1xbwgcG9kYW55IHBsaWsnfSwNCiAgICAgICAgICAgICAgICB2ID0+ICF2IHx8ICF2LnNvbWUodmFsdWUgPT4gIXRoaXMuYWxsb3dlZFR5cGVzLmluY2x1ZGVzKHZhbHVlLnR5cGUpKSB8fCAnUG9kYW5vIG5pZXfFgmHFm2Npd3kgZm9ybWF0IHBsaWt1LiBEb3B1c3pjemFsbmUgZm9ybWF0eTogcG5nLCBqcGcsIGpwZWcsIGJtcCwgaW1nJywNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBsb2FkZXI6IG5ldyBMb2FkZXIoew0KICAgICAgICAgICAgICAgIGFwaUtleTogIkFJemFTeUFwXy10b0p1ZVp4T09iZTBSeHhtWHZWeW9TX2pXNENRVSIsDQogICAgICAgICAgICAgICAgdmVyc2lvbjogIndlZWtseSIsDQogICAgICAgICAgICAgICAgbGlicmFyaWVzOiBbInBsYWNlcyJdDQogICAgICAgICAgICB9KSwNCiAgICAgICAgICAgIG1hcE9wdGlvbnM6IHsNCiAgICAgICAgICAgICAgICBjZW50ZXI6IHsNCiAgICAgICAgICAgICAgICAgICAgbGF0OiAwLA0KICAgICAgICAgICAgICAgICAgICBsbmc6IDANCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHpvb206IDQNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5sb2FkZXINCiAgICAgICAgICAgIC5sb2FkKCkNCiAgICAgICAgICAgIC50aGVuKChnb29nbGUpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXAiKSwgdGhpcy5tYXBPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBtYXAuYWRkTGlzdGVuZXIoImNsaWNrIiwgKG1hcHNNb3VzZUV2ZW50KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coew0KICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG1hcHNNb3VzZUV2ZW50LmxhdExuZywNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGluZm9XaW5kb3cpDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1hcHNNb3VzZUV2ZW50KQ0KICAgICAgICAgICAgICAgICAgICBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBtYXBzTW91c2VFdmVudC5sYXRMbmcsDQogICAgICAgICAgICAgICAgICAgICAgICBtYXAsDQogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkhlbGxvIFdvcmxkISIsDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoKT0+IHsNCiAgICAgICAgICAgICAgICAvLyBkbyBzb21ldGhpbmcNCiAgICAgICAgICAgIH0pOw0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBhZGRQb3N0KCl7DQogICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJsb2NhbGl6YXRpb24iLCB0aGlzLmxvY2FsaXphdGlvbik7DQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImNhdGVnb3J5IiwgdGhpcy5jYXRlZ29yeSk7DQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImRlc2NyaXB0aW9uIiwgdGhpcy5kZXNjcmlwdGlvbik7DQogICAgICAgICAgICB0aGlzLmNvbnZlcnRlZEltYWdlcy5mb3JFYWNoKChpbWFnZSkgPT4gew0KICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiaW1hZ2VzIiwgaW1hZ2UsIGltYWdlLm5hbWUpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhLmdldEFsbCgiaW1hZ2VzIikpDQogICAgICAgICAgICBheGlvc0FQSS5wb3N0KCIvYXBpL3Bvc3QiLGZvcm1EYXRhLHsNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IA0KICAgICAgICAgICAgICAgICAgICAuLi5heGlvc0FQSS5oZWFkZXJzLA0KICAgICAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnDQogICAgICAgICAgICB9fSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLnRva2VuKTsNCiAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXIocmVzLmRhdGEudXNlcikNCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVyciIpDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgb25BZGRGaWxlcyAoZmlsZXMpIHsNCiAgICAgICAgICAgIGlmKGZpbGVzLmxlbmd0aCA9PSAwKXsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRlZEltYWdlcyA9IFtdDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQ0KICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsNCiAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcw0KICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZXZlbnQudGFyZ2V0LnJlc3VsdF0pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpDQogICAgICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IGJsb2JVUkw7DQogICAgICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGFzeW5jIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc2l6ZWQgPSBzZWxmLnJlc2l6ZU1lKGltYWdlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlID0gYXdhaXQgZmV0Y2gocmVzaXplZCkudGhlbihyID0+IHIuYmxvYigpKS50aGVuKGJsb2JGaWxlID0+IG5ldyBGaWxlKFtibG9iRmlsZV0sIHNlbGYuaW1nTmFtZSgpLCB7IHR5cGU6ICJpbWFnZS9wbmciIH0pKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb252ZXJ0ZWRJbWFnZXMucHVzaChmaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICByZXNpemVNZShpbWcpIHsNCiAgICAgICAgDQogICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7DQoNCiAgICAgICAgICAgIHZhciB3aWR0aCA9IGltZy53aWR0aDsNCiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBpbWcuaGVpZ2h0Ow0KICAgICAgICAgICAgdmFyIG1heF93aWR0aCA9IDgwMDsNCiAgICAgICAgICAgIHZhciBtYXhfaGVpZ2h0ID0gODAwOw0KICAgICAgICAgICAgaWYgKHdpZHRoID4gaGVpZ2h0KSB7DQogICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gbWF4X3dpZHRoKSB7DQogICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5yb3VuZChoZWlnaHQgKj0gbWF4X3dpZHRoIC8gd2lkdGgpOw0KICAgICAgICAgICAgICAgIHdpZHRoID0gbWF4X3dpZHRoOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKGhlaWdodCA+IG1heF9oZWlnaHQpIHsNCiAgICAgICAgICAgICAgICB3aWR0aCA9IE1hdGgucm91bmQod2lkdGggKj0gbWF4X2hlaWdodCAvIGhlaWdodCk7DQogICAgICAgICAgICAgICAgaGVpZ2h0ID0gbWF4X2hlaWdodDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDsNCiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7DQogICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgd2lkdGgsIGhlaWdodCk7DQogICAgICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsMC44KTsNCg0KICAgICAgICB9LA0KICAgICAgICBpbWdOYW1lKCkgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnOw0KICAgICAgICAgICAgdmFyIGNoYXJhY3RlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknOw0KICAgICAgICAgICAgdmFyIGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDsNCiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IDIwOyBpKysgKSB7DQogICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDQogICAgICAgIGRyYWdvdmVyKGV2ZW50KSB7DQogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgdGhpcy4kcmVmcy5pbWdpbnB1dC5mb2N1cygpDQogICAgICAgIH0sDQogICAgICAgIGRyYWdsZWF2ZShldmVudCkgew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMuaW1naW5wdXQuYmx1cigpDQogICAgICAgIH0sDQogICAgICAgIGRyb3AoZXZlbnQpIHsNCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICB0aGlzLm9uQWRkRmlsZXMoQXJyYXkuZnJvbShldmVudC5kYXRhVHJhbnNmZXIuZmlsZXMpKQ0KICAgICAgICAgICAgdGhpcy5pbWFnZXMucHVzaCguLi5ldmVudC5kYXRhVHJhbnNmZXIuZmlsZXMpDQogICAgICAgICAgICB0aGlzLiRyZWZzLmltZ2lucHV0LnZhbGlkYXRlKCkNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["AddPlace.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddPlace.vue","sourceRoot":"src/components/post","sourcesContent":["<template>\r\n    <v-container>\r\n        <v-card>\r\n            <v-text-field\r\n                class=\"mt-5\"\r\n                v-model=\"localization\"\r\n                label=\"Lokalizacja\"\r\n            ></v-text-field>\r\n            <v-text-field\r\n                class=\"mt-5\"\r\n                v-model=\"category\"\r\n                label=\"Kategoria\"\r\n            ></v-text-field>\r\n            <v-textarea\r\n                class=\"mt-5\"\r\n                v-model=\"description\"\r\n                label=\"Opis\"\r\n            ></v-textarea>\r\n            <div\r\n                @dragover=\"dragover\"\r\n                @dragleave=\"dragleave\"\r\n                @drop=\"drop\"\r\n            >\r\n                <v-file-input\r\n                    accept=\"image/png, image/jpeg, image/bmp, image/img\"\r\n                    prepend-icon=\"mdi-camera\"\r\n                    ref=\"imginput\"\r\n                    chips\r\n                    multiple\r\n                    label=\"Zdjęcia\"\r\n                    :rules=\"imageRules\"\r\n                    v-model=\"images\"\r\n                    @change=\"onAddFiles\"\r\n                ></v-file-input>\r\n            </div>\r\n            <div id=\"map\" style=\"height: 360px; width: 640px;\"></div>\r\n            <v-btn\r\n                color=\"success\"\r\n                @click=\"addPost\"\r\n            >dodaj\r\n            </v-btn>\r\n        </v-card>\r\n    </v-container>\r\n</template>\r\n<script>\r\nimport {axiosAPI} from '../../axiosAPI';\r\nimport { Loader } from '@googlemaps/js-api-loader';\r\nexport default {\r\n    data(){\r\n        return {\r\n            localization: \"\",\r\n            category: \"\",\r\n            description: \"\",\r\n            images: [],\r\n            convertedImages: [],\r\n            allowedTypes: \"image/png, image/jpeg, image/bmp, image/img\",\r\n            imageRules: [\r\n                v => {\r\n                    var hasDuplicates = false\r\n                    var checkedValues = []\r\n                    v.forEach(value => {\r\n                        if (checkedValues.some(val => val.name == value.name)) {\r\n                            hasDuplicates = true\r\n                        }\r\n                        checkedValues.push(value)\r\n                    })\r\n                    return !hasDuplicates || 'Dodano już podany plik'},\r\n                v => !v || !v.some(value => !this.allowedTypes.includes(value.type)) || 'Podano niewłaściwy format pliku. Dopuszczalne formaty: png, jpg, jpeg, bmp, img',\r\n            ],\r\n            loader: new Loader({\r\n                apiKey: \"AIzaSyAp_-toJueZxOObe0RxxmXvVyoS_jW4CQU\",\r\n                version: \"weekly\",\r\n                libraries: [\"places\"]\r\n            }),\r\n            mapOptions: {\r\n                center: {\r\n                    lat: 0,\r\n                    lng: 0\r\n                },\r\n                zoom: 4\r\n            }\r\n        }\r\n    },\r\n    async mounted() {\r\n        this.loader\r\n            .load()\r\n            .then((google) => {\r\n                const map = new google.maps.Map(document.getElementById(\"map\"), this.mapOptions);\r\n                map.addListener(\"click\", (mapsMouseEvent) => {\r\n                    let infoWindow = new google.maps.InfoWindow({\r\n                        position: mapsMouseEvent.latLng,\r\n                    });\r\n                    console.log(infoWindow)\r\n                    console.log(mapsMouseEvent)\r\n                    new google.maps.Marker({\r\n                        position: mapsMouseEvent.latLng,\r\n                        map,\r\n                        title: \"Hello World!\",\r\n                    });\r\n                });\r\n            })\r\n            .catch(()=> {\r\n                // do something\r\n            });\r\n    },\r\n    methods: {\r\n        addPost(){\r\n            const formData = new FormData();\r\n            formData.append(\"localization\", this.localization);\r\n            formData.append(\"category\", this.category);\r\n            formData.append(\"description\", this.description);\r\n            this.convertedImages.forEach((image) => {\r\n                formData.append(\"images\", image, image.name);\r\n            })\r\n            console.log(formData.getAll(\"images\"))\r\n            axiosAPI.post(\"/api/post\",formData,{\r\n                headers: { \r\n                    ...axiosAPI.headers,\r\n                    'content-type': 'multipart/form-data'\r\n            }}).then(res => {\r\n                localStorage.setItem('token', res.data.token);\r\n                this.setUser(res.data.user)\r\n            }).catch(err => {\r\n                console.log(\"err\")\r\n                console.log(err)\r\n            })\r\n        },\r\n        onAddFiles (files) {\r\n            if(files.length == 0){\r\n                this.convertedImages = []\r\n            }\r\n            files.forEach((file) => {\r\n                const reader = new FileReader()\r\n                reader.readAsArrayBuffer(file);\r\n                const self = this\r\n                reader.onload = function (event) {\r\n                    var blob = new Blob([event.target.result]);\r\n                    var blobURL = URL.createObjectURL(blob);\r\n                    var image = new Image()\r\n                    image.src = blobURL;\r\n                    image.onload = async function() {\r\n                        var resized = self.resizeMe(image);\r\n                        let file = await fetch(resized).then(r => r.blob()).then(blobFile => new File([blobFile], self.imgName(), { type: \"image/png\" }))\r\n                        self.convertedImages.push(file);\r\n                    }\r\n                };\r\n            })\r\n        },\r\n        resizeMe(img) {\r\n        \r\n            var canvas = document.createElement('canvas');\r\n\r\n            var width = img.width;\r\n            var height = img.height;\r\n            var max_width = 800;\r\n            var max_height = 800;\r\n            if (width > height) {\r\n                if (width > max_width) {\r\n                height = Math.round(height *= max_width / width);\r\n                width = max_width;\r\n                }\r\n            } else {\r\n                if (height > max_height) {\r\n                width = Math.round(width *= max_height / height);\r\n                height = max_height;\r\n                }\r\n            }\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var ctx = canvas.getContext(\"2d\");\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            return canvas.toDataURL(\"image/jpeg\",0.8);\r\n\r\n        },\r\n        imgName() {\r\n            var result = '';\r\n            var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n            var charactersLength = characters.length;\r\n            for ( var i = 0; i < 20; i++ ) {\r\n                result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n            }\r\n            return result;\r\n        },\r\n        dragover(event) {\r\n            event.preventDefault();\r\n            this.$refs.imginput.focus()\r\n        },\r\n        dragleave(event) {\r\n            event.preventDefault();\r\n            this.$refs.imginput.blur()\r\n        },\r\n        drop(event) {\r\n            event.preventDefault();\r\n            this.onAddFiles(Array.from(event.dataTransfer.files))\r\n            this.images.push(...event.dataTransfer.files)\r\n            this.$refs.imginput.validate()\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>"]}]}